#!/bin/sh
current="$(autorandr --current)"
detected="$(autorandr --detected | sort)"

if [ "$(printf '%s' "$detected" | tail -n1)" = "$current" ]
then
    next="$(printf '%s' "$detected" | head -n1)"
else
    next="$(printf '%s' "$detected" | grep -A 1 "$current" | tail -n1)"
fi
if [ "$next" = "$current" ]
then
    printf 'Keeping profile "%s" (No other profile detected).\n' "$current"
else
    printf 'Switching from profile "%s" to "%s".\n' "$current" "$next"
fi
autorandr --change "$next"

# vim: set ft=sh ff=unix ts=4 sw=4 tw=0 et :
